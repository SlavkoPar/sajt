{"version":3,"sources":["../static/js/2.97f855f0.chunk.js","webpack:///./src/livequotes/LiveQuotes.css?b30f","livequotes/LiveQuotes.css","livequotes/LiveQuotesStore.js","livequotes/Pusher.js","livequotes/Subscription.js","livequotes/LiveQuotes.js"],"names":["webpackJsonp","180","module","exports","__webpack_require__","content","i","options","hmr","transform","locals","181","push","version","sources","names","mappings","file","sourcesContent","sourceRoot","182","__webpack_exports__","_classCallCheck","instance","Constructor","TypeError","Symbol","data","this","symbolId","name","group","digits","decimals","fractional","fract2","bid","ask","UpdateInfo","consumers","symbolConsumers","chartSymbolConsumers","d","liveQuotesStore","__WEBPACK_IMPORTED_MODULE_0__Pusher__","__WEBPACK_IMPORTED_MODULE_1__Subscription__","_createClass","defineProperties","target","props","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","getParts","askBid","sPrice","toFixed","base","substr","last2","fract","charAt","obj","bidUp","bidParts","askUp","askParts","epoch","strEpoch","Date","toLocaleTimeString","Update","LiveQuotesStore","mayors","symbolNames","symbols","symbolDict","pusher","subscription","value","onItemUpdate","_this","that","Promise","resolve","reject","addListener","row","OnItemUpdate","symbol","forEach","consumer","onEndOfSnapshot","console","log","entries","map","subscribe","undefined","find","element","alert","sym","command","getSymbol","OnAdd","get","183","Pusher","height","width","snapshotSymbols","getTime","s","n","assign","setInterval","Math","random","184","Subscription","arguments","init","itemList","items","config","onSubscription","99","_toConsumableArray","arr","Array","isArray","arr2","from","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_0_react___default","__WEBPACK_IMPORTED_MODULE_1__LiveQuotes_css__","__WEBPACK_IMPORTED_MODULE_2__LiveQuotesStore__","SearchBar","_React$Component","getPrototypeOf","handleFilterTextChange","bind","handleInStockChange","e","onFilterTextChange","onInStockChange","checked","a","createElement","type","placeholder","filterText","onChange","mayorsOnly","Component","SymbolRow","_React$PureComponent","_this2","handleTextChange","state","symbolClone","inEdit","timeoutId","_this3","subscribeToSymbol","clearTimeout","setState","fldName","date","style","color","setTimeout","hideArrow","textAlign","paddingRight","className","paddingLeft","PureComponent","SymbolTable","_React$PureComponent2","apply","rows","symbolRows","filter","toUpperCase","indexOf","LiveQuotes","_Component","_this5","loading","intervalId","loadData","clearInterval","_this6","getSnapshot","then","catch","reason"],"mappings":"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","file":"static/js/2.97f855f0.chunk.js","sourcesContent":["webpackJsonp([2],{\n\n/***/ 180:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(181);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":false}\noptions.transform = transform\n// add the styles to the DOM\nvar update = __webpack_require__(96)(content, options);\nif(content.locals) module.exports = content.locals;\n\n\n/***/ }),\n\n/***/ 181:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(95)(true);\n// imports\n\n\n// module\nexports.push([module.i, \".my-table{position:relative!important;table-layout:fixed;white-space:nowrap;border-top-width:0!important;margin-bottom:0!important;font-size:14px}.my-table>thead>tr>th{padding:0;border-bottom-width:0;color:grey}.my-table>tbody>tr:first-child>td{border-top-width:0;border-width:0}.my-table>tbody>tr>td{border-width:0}.first{font-size:18px}.last2{line-height:30px;font-size:28px}.last2,.last2grid{color:#5d5d5d;font-weight:700;padding:0 2px}.last2grid{line-height:12px;font-size:12px}.adv-tpl sup{vertical-align:super;font-size:85%}.table-sm td,.table-sm th{padding:.2rem!important}\", \"\", {\"version\":3,\"sources\":[\"E:/react/sajt/src/livequotes/LiveQuotes.css\"],\"names\":[],\"mappings\":\"AACA,UACI,4BAA8B,AAC9B,mBAAoB,AACpB,mBAAoB,AACpB,6BAAiC,AACjC,0BAA8B,AAC9B,cAAgB,CACnB,AAED,sBACI,UAAa,AACb,sBAAyB,AACzB,UAAW,CACd,AAED,kCACI,mBAAsB,AACtB,cAAkB,CACrB,AAED,sBACI,cAAkB,CACrB,AAID,OACI,cAAgB,CACnB,AAED,OAGI,iBAAkB,AAClB,cAAgB,CAEnB,AAED,kBAPI,cAAe,AACf,gBAAkB,AAGlB,aAAe,CASlB,AAND,WAGI,iBAAkB,AAClB,cAAgB,CAEnB,AAED,aACI,qBAAsB,AACtB,aAAe,CAClB,AAED,0BAEI,uBAA2B,CAC9B\",\"file\":\"LiveQuotes.css\",\"sourcesContent\":[\"\\r\\n.my-table {\\r\\n    position: relative !important;\\r\\n    table-layout: fixed;\\r\\n    white-space: nowrap;\\r\\n    border-top-width: 0px !important;\\r\\n    margin-bottom: 0px !important;\\r\\n    font-size: 14px;\\r\\n}\\r\\n\\r\\n.my-table > thead > tr > th {\\r\\n    padding: 0px;\\r\\n    border-bottom-width: 0px;\\r\\n    color:grey;\\r\\n}\\r\\n\\r\\n.my-table > tbody > tr:first-child > td {\\r\\n    border-top-width: 0px;\\r\\n    border-width: 0px;\\r\\n}\\r\\n\\r\\n.my-table > tbody > tr > td {\\r\\n    border-width: 0px;\\r\\n}\\r\\n\\r\\n\\r\\n\\r\\n.first {\\r\\n    font-size: 18px;\\r\\n}\\r\\n\\r\\n.last2 {\\r\\n    color: #5D5D5D;\\r\\n    font-weight: bold;\\r\\n    line-height: 30px;\\r\\n    font-size: 28px;\\r\\n    padding: 0 2px;\\r\\n}\\r\\n\\r\\n.last2grid {\\r\\n    color: #5D5D5D;\\r\\n    font-weight: bold;\\r\\n    line-height: 12px;\\r\\n    font-size: 12px;\\r\\n    padding: 0 2px;\\r\\n}\\r\\n\\r\\n.adv-tpl sup {\\r\\n    vertical-align: super;\\r\\n    font-size: 85%;\\r\\n}\\r\\n\\r\\n.table-sm th,\\r\\n.table-sm td {\\r\\n    padding: 0.2rem !important;\\r\\n}\\r\\n\\r\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 182:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return liveQuotesStore; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Pusher__ = __webpack_require__(183);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Subscription__ = __webpack_require__(184);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _Symbol(data){this.symbolId=data.symbolId;this.name=data.name;this.group=data.group;this.digits=(data.decimals||4)+(data.fractional||1);this.fract2=data.fractional+2;this.bid=data.bid;this.ask=data.ask;this.UpdateInfo(data);this.consumers=[];this.symbolConsumers=[];this.chartSymbolConsumers=[];}_Symbol.prototype.getParts=function(data,askBid){var sPrice=askBid.toFixed(this.digits);var d=sPrice.length-this.fract2;return{base:sPrice.substr(0,d),last2:sPrice.substr(d,2),fract:data.fractional===0?\"\":sPrice.charAt(sPrice.length-1)};};_Symbol.prototype.UpdateInfo=function(obj){this.bidUp=this.bid===obj.bid?null:this.bid<obj.bid?'bottom':'top';this.bid=obj.bid;this.bidParts=this.getParts(obj,obj.bid);this.askUp=this.ask===obj.ask?null:this.ask<obj.ask?'bottom':'top';this.ask=obj.ask;this.askParts=this.getParts(obj,obj.ask);this.epoch=obj.epoch;this.strEpoch=new Date(this.epoch).toLocaleTimeString();};_Symbol.prototype.Update=function(obj){this.UpdateInfo(obj);};var LiveQuotesStore=function(){function LiveQuotesStore(){_classCallCheck(this,LiveQuotesStore);this.mayors=[\"EURUSD\",\"GBPUSD\",\"USDJPY\",\"USDCHF\",\"GBPCHF\",\"NZDUSD\",\"USDCAD\",\"GBPJPY\",\"EURNZD\",\"EURJPY\",\"EURCHF\",\"AUDCAD\",\"AUDJPY\",\"CADJPY\"];this.symbolNames=[];this.symbols=[];this.symbolDict={};this.pusher=new __WEBPACK_IMPORTED_MODULE_0__Pusher__[\"a\" /* Pusher */]();this.subscription=null;this.consumers=[];}_createClass(LiveQuotesStore,[{key:\"getSnapshot\",value:function getSnapshot(onItemUpdate){var _this=this;var that=this;return new Promise(function(resolve,reject){if(onItemUpdate!=null)_this.consumers.push({onItemUpdate:onItemUpdate});if(_this.subscription==null){_this.subscription=new __WEBPACK_IMPORTED_MODULE_1__Subscription__[\"a\" /* Subscription */](_this.symbolNames);_this.subscription.addListener({onItemUpdate:function onItemUpdate(row){that.OnItemUpdate(row);// prepare row for state\n//onItemUpdate(that.symbolDict[row.symbolId]);\n// TODO do not call before onEndOfSnapshot, for LiveQuotesGrid only\nvar symbol=that.symbolDict[row.symbolId];that.consumers.forEach(function(consumer){return consumer.onItemUpdate(symbol);});symbol.symbolConsumers.forEach(function(consumer){return consumer.onItemUpdate({bidParts:Object.assign({},symbol.bidParts),bidUp:symbol.bidUp,askParts:Object.assign({},symbol.askParts),askUp:symbol.askUp,epoch:symbol.epoch,strEpoch:symbol.strEpoch});});symbol.chartSymbolConsumers.forEach(function(consumer){return consumer.onItemUpdate({epoch:symbol.epoch,bid:symbol.bid,ask:symbol.ask});});},onEndOfSnapshot:function onEndOfSnapshot(){console.log(\"first LiveQuotesStore.OnEndOfSnapshot()\"+that.symbols.length);console.log(Object.entries(that.symbolDict));resolve(that.symbols.map(function(symbol){return{symbolId:symbol.symbolId,name:symbol.name,group:symbol.group,bidParts:Object.assign({},symbol.bidParts),bidUp:symbol.bidUp,askParts:Object.assign({},symbol.askParts),askUp:symbol.askUp,epoch:symbol.epoch,strEpoch:symbol.strEpoch};}));}});_this.pusher.subscribe(_this.subscription);}else{console.log(\"non first LiveQuotesStore.OnEndOfSnapshot() called for other subscribers \"+that.symbols.length);resolve(that.symbols);}});}},{key:\"subscribeToSymbol\",value:function subscribeToSymbol(symbolId,onItemUpdate){var symbol=this.symbolDict[symbolId];if(symbol===undefined)console.log(\"this.symbolDict[\"+symbolId+\"] not found. \");else symbol.symbolConsumers.push({onItemUpdate:onItemUpdate});}},{key:\"subscribeToChartSymbol\",value:function subscribeToChartSymbol(symbolId,onItemUpdate){var symbol=this.symbolDict[symbolId];if(symbol===undefined)console.log(\"this.symbolDict[\"+symbolId+\"] not found. \");else symbol.chartSymbolConsumers.push({onItemUpdate:onItemUpdate});}},{key:\"OnAdd\",value:function OnAdd(data){var symbol=new _Symbol(data);this.symbols.push(symbol);this.symbolDict[symbol.symbolId]=symbol;}},{key:\"getSymbol\",value:function getSymbol(symbolId){var symbol=this.symbols.find(function(element){return element.symbolId===symbolId;});if(!symbol)alert(\"Not found symbol(\"+symbolId+\") in:\"+this.symbols.map(function(sym){return sym.symbolId;}));return symbol;}},{key:\"OnItemUpdate\",value:function OnItemUpdate(obj){var command=obj.command;//logIt(\"STOCK_QUOTES command/key/symbol:\" + command + \"/\" + key + \"/\" + symbol);\nif(command===\"UPDATE\"){//logIt(\"UPDATE \" + pSymbolGroup.GroupName + \" / \" +  symbol)\n//var symbolId = obj.symbol;\nvar symbol=this.symbolDict[obj.symbolId];if(!symbol)// TODO novi simbol moze samo kroz Add\nsymbol=this.symbolDict[obj.symbolId]=this.getSymbol(obj.symbolId);//if (!symbol)   // allow updating of the InitialView while rendering rest of rows\n//    return;\nsymbol.Update(obj);//if (obj.symbol === 'EURUSD')\n//    UpdateTick(obj.epoch, obj.bid, obj.ask);\n}else if(command===\"ADD\"){this.OnAdd(obj);}else if(command===\"DELETE\"){//OnDelete(symbolId)\n}}},{key:\"Mayors\",get:function get(){return this.mayors;}},{key:\"Symbols\",get:function get(){return this.symbols;}}]);return LiveQuotesStore;}();/*\r\nfunction createStore(reducer) {\r\n    var state;\r\n    var listeners = []\r\n\r\n    function getState() {\r\n        return state\r\n    }\r\n    \r\n    function subscribe(listener) {\r\n        listeners.push(listener)\r\n        return function unsubscribe() {\r\n            var index = listeners.indexOf(listener)\r\n            listeners.splice(index, 1)\r\n        }\r\n    }\r\n    \r\n    function dispatch(action) {\r\n        state = reducer(state, action)\r\n        listeners.forEach(listener => listener())\r\n    }\r\n\r\n    dispatch({})\r\n\r\n    return { dispatch, subscribe, getState }\r\n}\r\n*/var liveQuotesStore=new LiveQuotesStore();\n\n/***/ }),\n\n/***/ 183:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Pusher; });\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}var Pusher=function(){function Pusher(height,width){_classCallCheck(this,Pusher);this.height=height;this.width=width;this.snapshotSymbols=[{name:\"EURUSD\",group:\"mayor\",decimals:4,fractional:1,bid:1.17829,ask:1.156,epoch:new Date().getTime()},{name:\"GBPUSD\",group:\"\",decimals:4,fractional:1,bid:1.0,ask:1.1,epoch:new Date().getTime()},{name:\"USDJPY\",group:\"mayor\",decimals:2,fractional:0,bid:1.0,ask:1.1,epoch:new Date().getTime()},{name:\"USDCHF\",group:\"mayor\",decimals:4,fractional:1,bid:1.0,ask:1.1,epoch:new Date().getTime()},{name:\"GBPCHF\",group:\"\",decimals:4,fractional:1,bid:1.0,ask:1.1,epoch:new Date().getTime()},{name:\"NZDUSD\",group:\"\",decimals:4,fractional:1,bid:1.0,ask:1.1,epoch:new Date().getTime()},{name:\"USDCAD\",group:\"\",decimals:4,fractional:1,bid:1.0,ask:1.1,epoch:new Date().getTime()},{name:\"GBPJPY\",group:\"\",decimals:2,fractional:0,bid:1.0,ask:1.1,epoch:new Date().getTime()},{name:\"EURNZD\",group:\"\",decimals:4,fractional:1,bid:1.0,ask:1.1,epoch:new Date().getTime()},{name:\"EURJPY\",group:\"mayor\",decimals:2,fractional:0,bid:1.0,ask:1.1,epoch:new Date().getTime()},{name:\"EURCHF\",group:\"mayor\",decimals:4,fractional:1,bid:1.0,ask:1.1,epoch:new Date().getTime()},{name:\"AUDCAD\",group:\"\",decimals:4,fractional:1,bid:1.0,ask:1.1,epoch:new Date().getTime()},{name:\"AUDJPY\",group:\"\",decimals:2,fractional:0,bid:1.0,ask:1.1,epoch:new Date().getTime()},{name:\"CADJPY\",group:\"\",decimals:2,fractional:0,bid:1.0,ask:1.1,epoch:new Date().getTime()}];}_createClass(Pusher,[{key:\"subscribe\",value:function subscribe(s){var subscription=s;// subscribe to server\nvar n=300;this.snapshotSymbols.forEach(function(sym){//subscription.onItemUpdate($.extend(sym, { command: \"ADD\" }));\n//console.log({ ...sym, command: \"ADD\" });\nsubscription.onItemUpdate(Object.assign({},sym,{symbolId:sym.name,command:\"ADD\"}));// set up the updating of the each second\nsetInterval(function(){/*var mathRandom = */Math.random();if(Math.random()>0.5){sym.ask+=0.0132;sym.bid+=0.0131;}else{sym.ask-=0.0161;sym.bid-=0.0173;}//var obj = $.extend({}, sym, { command: \"UPDATE\" })\nvar obj=Object.assign({},sym,{symbolId:sym.name,command:\"UPDATE\"});obj.epoch=new Date().getTime();subscription.onItemUpdate(obj);},sym.name==='EURUSD'?1500:n);n+=50;});subscription.onEndOfSnapshot();}}]);return Pusher;}();;\n\n/***/ }),\n\n/***/ 184:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Subscription; });\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}var Subscription=function(){function Subscription(){var items=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];_classCallCheck(this,Subscription);this.init=function(itemList){this.items=itemList;};this.items=[];}_createClass(Subscription,[{key:\"onSubscription\",value:function onSubscription(){}},{key:\"onEndOfSnapshot\",value:function onEndOfSnapshot(){}},{key:\"onItemUpdate\",value:function onItemUpdate(){}},{key:\"addListener\",value:function addListener(config){this.onSubscription=config.onSubscription;this.onEndOfSnapshot=config.onEndOfSnapshot;this.onItemUpdate=config.onItemUpdate;}}]);return Subscription;}();;\n\n/***/ }),\n\n/***/ 99:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__LiveQuotes_css__ = __webpack_require__(180);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__LiveQuotes_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__LiveQuotes_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__LiveQuotesStore__ = __webpack_require__(182);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}// import { Loading } from './theme-sources/bootstrap4/components/loading';\nvar SearchBar=function(_React$Component){_inherits(SearchBar,_React$Component);function SearchBar(props){_classCallCheck(this,SearchBar);var _this=_possibleConstructorReturn(this,(SearchBar.__proto__||Object.getPrototypeOf(SearchBar)).call(this,props));_this.handleFilterTextChange=_this.handleFilterTextChange.bind(_this);_this.handleInStockChange=_this.handleInStockChange.bind(_this);return _this;}_createClass(SearchBar,[{key:\"handleFilterTextChange\",value:function handleFilterTextChange(e){this.props.onFilterTextChange(e.target.value);}},{key:\"handleInStockChange\",value:function handleInStockChange(e){this.props.onInStockChange(e.target.checked);}},{key:\"render\",value:function render(){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"form\",null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"input\",{type:\"text\",placeholder:\"Search...\",value:this.props.filterText,onChange:this.handleFilterTextChange}),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"p\",null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"input\",{type:\"checkbox\",checked:this.props.mayorsOnly,onChange:this.handleInStockChange}),' ',\"Only show mayors\"));}}]);return SearchBar;}(__WEBPACK_IMPORTED_MODULE_0_react___default.a.Component);/*\r\nclass CellInput extends React.PureComponent {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleTextChange = this.handleTextChange.bind(this, this.props.fieldName);\r\n    }\r\n\r\n    handleTextChange(fldName, e) {\r\n        this.props.onTextChange(fldName, e.target.value);\r\n    }\r\n\r\n    render() {\r\n        const symbol = this.props.symbol;\r\n        const value = symbol[this.props.fieldName];\r\n        if (this.props.inEdit) {\r\n            return (\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"...\"\r\n                    value={value}\r\n                    onChange={this.handleTextChange}\r\n                />)\r\n        }\r\n\r\n        return (\r\n            <span>{value}</span>\r\n        );\r\n    }\r\n}\r\n*/var SymbolRow=function(_React$PureComponent){_inherits(SymbolRow,_React$PureComponent);function SymbolRow(props){_classCallCheck(this,SymbolRow);var _this2=_possibleConstructorReturn(this,(SymbolRow.__proto__||Object.getPrototypeOf(SymbolRow)).call(this,props));_this2.handleTextChange=_this2.handleTextChange.bind(_this2);//this.handleEdit = this.handleEdit.bind(this);\n//this.handleCancel = this.handleCancel.bind(this);\n_this2.state={symbol:_this2.props.symbol,symbolClone:null,inEdit:false};_this2.timeoutId=null;return _this2;}_createClass(SymbolRow,[{key:\"componentDidMount\",value:function componentDidMount(){var _this3=this;var symbol=this.state.symbol;__WEBPACK_IMPORTED_MODULE_2__LiveQuotesStore__[\"a\" /* liveQuotesStore */].subscribeToSymbol(symbol.symbolId,function(obj){clearTimeout(_this3.timeoutId);_this3.setState({symbol:Object.assign({},symbol,obj)});});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){// TODO unsubscribe\n}},{key:\"handleTextChange\",value:function handleTextChange(fldName,value){var symbol=Object.assign({},this.state.symbol);symbol[fldName]=value;this.setState({symbol:symbol});}/*\r\n    handleEdit(e) {\r\n        if (!this.state.inEdit) {\r\n            //this.state.symbolClone = $.extend(true, {}, this.state.symbol);\r\n            this.state.symbolClone = Object.assign({}, this.state.symbol);\r\n        }\r\n        this.setState(prevState => ({\r\n            inEdit: !prevState.inEdit\r\n        }));\r\n    }\r\n\r\n    handleCancel(value) {\r\n        this.setState(prevState => ({\r\n            //symbol: { price : prevState.price },\r\n            //symbol : $.extend(true, {}, this.state.symbolClone),\r\n            symbol: Object.assign({}, this.state.symbolClone),\r\n            inEdit: !prevState.inEdit\r\n        }));\r\n    }\r\n    */},{key:\"hideArrow\",value:function hideArrow(){//console.log(`hideArrow ${this.state.symbol.name}`)\n//console.log(this.state.symbol)\nvar date=new Date();//console.log(sym)\nthis.setState({symbol:Object.assign({},this.state.symbol,{bidUp:null,askUp:null,epoch:date.getTime(),strEpoch:date.toLocaleTimeString()})});this.timeoutId=null;//console.log(this.state.symbol)\n}},{key:\"render\",value:function render(){var symbol=this.state.symbol;var name=symbol.group!==\"mayor\"?symbol.name:__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"span\",{style:{color:'gold'}},symbol.name);var bidParts=symbol.bidParts;var bidUp=symbol.bidUp;var askParts=symbol.askParts;var askUp=symbol.askUp;//if (this.timeoutId != null)\nclearTimeout(this.timeoutId);this.timeoutId=setTimeout(this.hideArrow.bind(this),2000);return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"tr\",null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"td\",null,name),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"td\",{style:{textAlign:'right','paddingRight':'0'}},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"span\",null,bidParts.base),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"span\",{className:\"last2grid\"},bidParts.last2),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"sup\",null,bidParts.fract)),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"td\",{style:{textAlign:'left','paddingLeft':'0',color:bidUp==='bottom'?'green':'red'}},bidUp?__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"i\",{className:\"oi oi-caret-\"+bidUp}):null),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"td\",{style:{textAlign:'right','paddingRight':'0'}},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"span\",null,askParts.base),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"span\",{className:\"last2grid\"},askParts.last2),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"sup\",null,askParts.fract)),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"td\",{style:{textAlign:'left','paddingLeft':'0',color:bidUp==='bottom'?'green':'red'}},askUp?__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"i\",{className:\"oi oi-caret-\"+askUp}):null),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"td\",null,symbol.strEpoch));}}]);return SymbolRow;}(__WEBPACK_IMPORTED_MODULE_0_react___default.a.PureComponent);var SymbolTable=function(_React$PureComponent2){_inherits(SymbolTable,_React$PureComponent2);function SymbolTable(){_classCallCheck(this,SymbolTable);return _possibleConstructorReturn(this,(SymbolTable.__proto__||Object.getPrototypeOf(SymbolTable)).apply(this,arguments));}_createClass(SymbolTable,[{key:\"render\",value:function render(){var filterText=this.props.filterText;var mayorsOnly=this.props.mayorsOnly;var rows=[];//let lastGroup = null;\nthis.props.symbolRows.forEach(function(symbol){var filter=filterText.toUpperCase();if(symbol.name.indexOf(filter)===-1){return;}if(mayorsOnly&&symbol.group!==\"mayor\"){return;}rows.push(__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(SymbolRow,{symbol:symbol,key:symbol.name}));//lastGroup = symbol.group;\n});return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"table\",{className:\"table table-striped table-bordered table-hover table-sm table-dark my-table \"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"thead\",null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"tr\",null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"th\",null,\"Symbol\"),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"th\",{style:{textAlign:\"right\"}},\"Bid\"),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"th\",null),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"th\",{style:{textAlign:\"right\"}},\"Ask\"),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"th\",null),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"th\",null,\"Time\"))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"tbody\",null,rows));}}]);return SymbolTable;}(__WEBPACK_IMPORTED_MODULE_0_react___default.a.PureComponent);var LiveQuotes=function(_Component){_inherits(LiveQuotes,_Component);function LiveQuotes(props){_classCallCheck(this,LiveQuotes);var _this5=_possibleConstructorReturn(this,(LiveQuotes.__proto__||Object.getPrototypeOf(LiveQuotes)).call(this,props));_this5.state={filterText:'',mayorsOnly:false,symbolRows:[],loading:true};_this5.handleFilterTextChange=_this5.handleFilterTextChange.bind(_this5);_this5.handleInStockChange=_this5.handleInStockChange.bind(_this5);_this5.intervalId=null;return _this5;}_createClass(LiveQuotes,[{key:\"handleFilterTextChange\",value:function handleFilterTextChange(filterText){this.setState({filterText:filterText});}},{key:\"handleInStockChange\",value:function handleInStockChange(mayorsOnly){this.setState({mayorsOnly:mayorsOnly});}},{key:\"componentDidMount\",value:function componentDidMount(){this.loadData();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){//this.loadData();\n}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){clearInterval(this.intervalId);}//play() {\n//}\n},{key:\"loadData\",value:function loadData(){var _this6=this;__WEBPACK_IMPORTED_MODULE_2__LiveQuotesStore__[\"a\" /* liveQuotesStore */].getSnapshot(null).then(function(symbolRows){_this6.setState({symbolRows:[].concat(_toConsumableArray(symbolRows)),loading:false});//this.intervalId = setInterval(this.play.bind(this), 1000);\n}).catch(function(reason){return console.log('Handle rejected liveQuotesStore.subscribe promise:'+reason);});}},{key:\"render\",value:function render(){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\",{className:\"LiveQuotes\"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(SearchBar,{filterText:this.state.filterText,mayorsOnly:this.state.mayorsOnly,onFilterTextChange:this.handleFilterTextChange,onInStockChange:this.handleInStockChange}),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(SymbolTable,{symbolRows:this.state.symbolRows,filterText:this.state.filterText,mayorsOnly:this.state.mayorsOnly}));}}]);return LiveQuotes;}(__WEBPACK_IMPORTED_MODULE_0_react__[\"Component\"]);/* harmony default export */ __webpack_exports__[\"default\"] = (LiveQuotes);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/2.97f855f0.chunk.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js??ref--1-oneOf-2-2!../../node_modules/postcss-loader/lib/index.js??postcss!./LiveQuotes.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":false}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/livequotes/LiveQuotes.css\n// module id = 180\n// module chunks = 2","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".my-table{position:relative!important;table-layout:fixed;white-space:nowrap;border-top-width:0!important;margin-bottom:0!important;font-size:14px}.my-table>thead>tr>th{padding:0;border-bottom-width:0;color:grey}.my-table>tbody>tr:first-child>td{border-top-width:0;border-width:0}.my-table>tbody>tr>td{border-width:0}.first{font-size:18px}.last2{line-height:30px;font-size:28px}.last2,.last2grid{color:#5d5d5d;font-weight:700;padding:0 2px}.last2grid{line-height:12px;font-size:12px}.adv-tpl sup{vertical-align:super;font-size:85%}.table-sm td,.table-sm th{padding:.2rem!important}\", \"\", {\"version\":3,\"sources\":[\"E:/react/sajt/src/livequotes/LiveQuotes.css\"],\"names\":[],\"mappings\":\"AACA,UACI,4BAA8B,AAC9B,mBAAoB,AACpB,mBAAoB,AACpB,6BAAiC,AACjC,0BAA8B,AAC9B,cAAgB,CACnB,AAED,sBACI,UAAa,AACb,sBAAyB,AACzB,UAAW,CACd,AAED,kCACI,mBAAsB,AACtB,cAAkB,CACrB,AAED,sBACI,cAAkB,CACrB,AAID,OACI,cAAgB,CACnB,AAED,OAGI,iBAAkB,AAClB,cAAgB,CAEnB,AAED,kBAPI,cAAe,AACf,gBAAkB,AAGlB,aAAe,CASlB,AAND,WAGI,iBAAkB,AAClB,cAAgB,CAEnB,AAED,aACI,qBAAsB,AACtB,aAAe,CAClB,AAED,0BAEI,uBAA2B,CAC9B\",\"file\":\"LiveQuotes.css\",\"sourcesContent\":[\"\\r\\n.my-table {\\r\\n    position: relative !important;\\r\\n    table-layout: fixed;\\r\\n    white-space: nowrap;\\r\\n    border-top-width: 0px !important;\\r\\n    margin-bottom: 0px !important;\\r\\n    font-size: 14px;\\r\\n}\\r\\n\\r\\n.my-table > thead > tr > th {\\r\\n    padding: 0px;\\r\\n    border-bottom-width: 0px;\\r\\n    color:grey;\\r\\n}\\r\\n\\r\\n.my-table > tbody > tr:first-child > td {\\r\\n    border-top-width: 0px;\\r\\n    border-width: 0px;\\r\\n}\\r\\n\\r\\n.my-table > tbody > tr > td {\\r\\n    border-width: 0px;\\r\\n}\\r\\n\\r\\n\\r\\n\\r\\n.first {\\r\\n    font-size: 18px;\\r\\n}\\r\\n\\r\\n.last2 {\\r\\n    color: #5D5D5D;\\r\\n    font-weight: bold;\\r\\n    line-height: 30px;\\r\\n    font-size: 28px;\\r\\n    padding: 0 2px;\\r\\n}\\r\\n\\r\\n.last2grid {\\r\\n    color: #5D5D5D;\\r\\n    font-weight: bold;\\r\\n    line-height: 12px;\\r\\n    font-size: 12px;\\r\\n    padding: 0 2px;\\r\\n}\\r\\n\\r\\n.adv-tpl sup {\\r\\n    vertical-align: super;\\r\\n    font-size: 85%;\\r\\n}\\r\\n\\r\\n.table-sm th,\\r\\n.table-sm td {\\r\\n    padding: 0.2rem !important;\\r\\n}\\r\\n\\r\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"importLoaders\":1,\"minimize\":true,\"sourceMap\":true}!./node_modules/postcss-loader/lib?{\"ident\":\"postcss\",\"plugins\":[null,null]}!./src/livequotes/LiveQuotes.css\n// module id = 181\n// module chunks = 2","\r\nimport { Pusher } from \"./Pusher\"\r\nimport { Subscription } from \"./Subscription\"\r\n\r\nfunction Symbol(data)\r\n{\r\n    this.symbolId = data.symbolId;\r\n    this.name = data.name;\r\n    this.group = data.group;\r\n\r\n    this.digits = (data.decimals || 4) + (data.fractional || 1);\r\n    this.fract2 = data.fractional + 2;\r\n\r\n    this.bid = data.bid;\r\n    this.ask = data.ask;\r\n    this.UpdateInfo(data);\r\n\r\n    this.consumers = [];\r\n    this.symbolConsumers = [];\r\n    this.chartSymbolConsumers = [];\r\n}\r\n\r\nSymbol.prototype.getParts = function(data, askBid) {\r\n    var sPrice = askBid.toFixed(this.digits);\r\n    var d = sPrice.length - this.fract2;\r\n    return {\r\n        base: sPrice.substr(0, d),\r\n        last2: sPrice.substr(d, 2),\r\n        fract: data.fractional === 0 ? \"\" : sPrice.charAt(sPrice.length - 1)\r\n    }\r\n}\r\n\r\n\r\nSymbol.prototype.UpdateInfo = function (obj) {\r\n\r\n    this.bidUp = this.bid === obj.bid ? null : this.bid < obj.bid ? 'bottom' : 'top';\r\n    this.bid = obj.bid;\r\n    this.bidParts = this.getParts(obj, obj.bid);\r\n\r\n    this.askUp = this.ask === obj.ask ? null : this.ask < obj.ask ? 'bottom' : 'top';\r\n    this.ask = obj.ask;\r\n    this.askParts = this.getParts(obj, obj.ask);\r\n\r\n    this.epoch = obj.epoch;\r\n    this.strEpoch = (new Date(this.epoch)).toLocaleTimeString();\r\n}\r\n\r\nSymbol.prototype.Update = function (obj) {\r\n    this.UpdateInfo(obj);\r\n}\r\n\r\n\r\n\r\n\r\nclass LiveQuotesStore {\r\n\r\n    constructor() {\r\n        this.mayors = [\"EURUSD\", \"GBPUSD\", \"USDJPY\", \"USDCHF\", \"GBPCHF\", \"NZDUSD\", \"USDCAD\", \"GBPJPY\", \"EURNZD\", \"EURJPY\", \"EURCHF\", \"AUDCAD\", \"AUDJPY\", \"CADJPY\"]\r\n\r\n        this.symbolNames = [];\r\n        this.symbols = [];\r\n        this.symbolDict = {};\r\n\r\n        this.pusher = new Pusher();\r\n\r\n        this.subscription = null;\r\n        this.consumers = [];\r\n    }\r\n\r\n    get Mayors() {\r\n        return this.mayors;\r\n    }\r\n\r\n    get Symbols() {\r\n        return this.symbols;\r\n    }\r\n\r\n  \r\n    getSnapshot(onItemUpdate) {\r\n        var that = this;\r\n        return new Promise((resolve, reject) => {\r\n\r\n            if (onItemUpdate != null)\r\n                this.consumers.push({ onItemUpdate: onItemUpdate })\r\n\r\n            if (this.subscription == null) {\r\n                this.subscription = new Subscription(this.symbolNames);\r\n\r\n                this.subscription.addListener({\r\n                    onItemUpdate: function (row) {\r\n                        that.OnItemUpdate(row); // prepare row for state\r\n                        //onItemUpdate(that.symbolDict[row.symbolId]);\r\n                        // TODO do not call before onEndOfSnapshot, for LiveQuotesGrid only\r\n                        const symbol = that.symbolDict[row.symbolId];\r\n                        that.consumers.forEach(consumer => consumer.onItemUpdate(symbol));\r\n                        symbol.symbolConsumers.forEach(consumer => consumer.onItemUpdate({\r\n                            bidParts: { ...symbol.bidParts },\r\n                            bidUp: symbol.bidUp,\r\n                            askParts: { ...symbol.askParts },\r\n                            askUp: symbol.askUp,\r\n                            epoch: symbol.epoch,\r\n                            strEpoch: symbol.strEpoch\r\n                        }));\r\n                        symbol.chartSymbolConsumers.forEach(consumer => consumer.onItemUpdate({\r\n                            epoch: symbol.epoch,\r\n                            bid: symbol.bid,\r\n                            ask: symbol.ask\r\n                        }));\r\n                    },\r\n                    onEndOfSnapshot: function () {\r\n                        console.log(\"first LiveQuotesStore.OnEndOfSnapshot()\" + that.symbols.length)\r\n                        console.log(Object.entries(that.symbolDict))\r\n\r\n                        resolve(that.symbols.map(symbol => {\r\n                            return {\r\n                                symbolId: symbol.symbolId,\r\n                                name: symbol.name,\r\n                                group: symbol.group,\r\n                                bidParts: { ...symbol.bidParts },\r\n                                bidUp: symbol.bidUp,\r\n                                askParts: { ...symbol.askParts },\r\n                                askUp: symbol.askUp,\r\n                                epoch: symbol.epoch,\r\n                                strEpoch: symbol.strEpoch\r\n                            }\r\n                        }));\r\n                    }\r\n                });\r\n\r\n                this.pusher.subscribe(this.subscription);\r\n            }\r\n            else {\r\n                console.log(\"non first LiveQuotesStore.OnEndOfSnapshot() called for other subscribers \" + that.symbols.length)\r\n                resolve(that.symbols);\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n    subscribeToSymbol(symbolId, onItemUpdate) {\r\n        var symbol = this.symbolDict[symbolId];\r\n        if (symbol === undefined)\r\n            console.log(\"this.symbolDict[\" + symbolId + \"] not found. \")\r\n        else\r\n            symbol.symbolConsumers.push({ onItemUpdate: onItemUpdate })\r\n    }\r\n\r\n    subscribeToChartSymbol(symbolId, onItemUpdate) {\r\n        var symbol = this.symbolDict[symbolId];\r\n        if (symbol === undefined)\r\n            console.log(\"this.symbolDict[\" + symbolId + \"] not found. \")\r\n        else\r\n            symbol.chartSymbolConsumers.push({ onItemUpdate: onItemUpdate })\r\n    }\r\n\r\n\r\n    OnAdd(data) {\r\n        const symbol = new Symbol(data); \r\n        this.symbols.push(symbol);\r\n        this.symbolDict[symbol.symbolId] = symbol;\r\n    }\r\n\r\n    getSymbol(symbolId) {\r\n        var symbol = this.symbols.find(function (element) {\r\n            return element.symbolId === symbolId;\r\n        });\r\n\r\n        if (!symbol)\r\n            alert(\"Not found symbol(\" + symbolId + \") in:\" + this.symbols.map(sym => sym.symbolId));\r\n        return symbol;\r\n    }\r\n\r\n\r\n    OnItemUpdate(obj) {\r\n        var command = obj.command;\r\n        //logIt(\"STOCK_QUOTES command/key/symbol:\" + command + \"/\" + key + \"/\" + symbol);\r\n        if (command === \"UPDATE\") {\r\n            //logIt(\"UPDATE \" + pSymbolGroup.GroupName + \" / \" +  symbol)\r\n\r\n            //var symbolId = obj.symbol;\r\n            var symbol = this.symbolDict[obj.symbolId];\r\n            if (!symbol)   // TODO novi simbol moze samo kroz Add\r\n                symbol = this.symbolDict[obj.symbolId] = this.getSymbol(obj.symbolId);\r\n\r\n            //if (!symbol)   // allow updating of the InitialView while rendering rest of rows\r\n            //    return;\r\n            symbol.Update(obj);\r\n\r\n            //if (obj.symbol === 'EURUSD')\r\n            //    UpdateTick(obj.epoch, obj.bid, obj.ask);\r\n        }\r\n        else if (command === \"ADD\") {\r\n            this.OnAdd(obj)\r\n        }\r\n        else if (command === \"DELETE\") {\r\n            //OnDelete(symbolId)\r\n        }\r\n    };\r\n\r\n}\r\n\r\n/*\r\nfunction createStore(reducer) {\r\n    var state;\r\n    var listeners = []\r\n\r\n    function getState() {\r\n        return state\r\n    }\r\n    \r\n    function subscribe(listener) {\r\n        listeners.push(listener)\r\n        return function unsubscribe() {\r\n            var index = listeners.indexOf(listener)\r\n            listeners.splice(index, 1)\r\n        }\r\n    }\r\n    \r\n    function dispatch(action) {\r\n        state = reducer(state, action)\r\n        listeners.forEach(listener => listener())\r\n    }\r\n\r\n    dispatch({})\r\n\r\n    return { dispatch, subscribe, getState }\r\n}\r\n*/\r\n\r\n\r\nexport let liveQuotesStore = new LiveQuotesStore();\n\n\n// WEBPACK FOOTER //\n// ./src/livequotes/LiveQuotesStore.js","\r\nexport class Pusher {\r\n\r\n    constructor(height, width) {\r\n        this.height = height;\r\n        this.width = width;\r\n\r\n        this.snapshotSymbols = [\r\n            { name: \"EURUSD\", group: \"mayor\", decimals: 4, fractional: 1, bid: 1.17829, ask: 1.156, epoch: (new Date()).getTime() },\r\n            { name: \"GBPUSD\", group: \"\", decimals: 4, fractional: 1, bid: 1.0, ask: 1.1, epoch: (new Date()).getTime() },\r\n            { name: \"USDJPY\", group: \"mayor\", decimals: 2, fractional: 0, bid: 1.0, ask: 1.1, epoch: (new Date()).getTime() },\r\n            { name: \"USDCHF\", group: \"mayor\", decimals: 4, fractional: 1, bid: 1.0, ask: 1.1, epoch: (new Date()).getTime() },\r\n            { name: \"GBPCHF\", group: \"\", decimals: 4, fractional: 1, bid: 1.0, ask: 1.1, epoch: (new Date()).getTime() },\r\n            { name: \"NZDUSD\", group: \"\", decimals: 4, fractional: 1, bid: 1.0, ask: 1.1, epoch: (new Date()).getTime() },\r\n            { name: \"USDCAD\", group: \"\", decimals: 4, fractional: 1, bid: 1.0, ask: 1.1, epoch: (new Date()).getTime() },\r\n            { name: \"GBPJPY\", group: \"\", decimals: 2, fractional: 0, bid: 1.0, ask: 1.1, epoch: (new Date()).getTime() },\r\n            { name: \"EURNZD\", group: \"\", decimals: 4, fractional: 1, bid: 1.0, ask: 1.1, epoch: (new Date()).getTime() },\r\n            { name: \"EURJPY\", group: \"mayor\", decimals: 2, fractional: 0, bid: 1.0, ask: 1.1, epoch: (new Date()).getTime() },\r\n            { name: \"EURCHF\", group: \"mayor\", decimals: 4, fractional: 1, bid: 1.0, ask: 1.1, epoch: (new Date()).getTime() },\r\n            { name: \"AUDCAD\", group: \"\", decimals: 4, fractional: 1, bid: 1.0, ask: 1.1, epoch: (new Date()).getTime() },\r\n            { name: \"AUDJPY\", group: \"\", decimals: 2, fractional: 0, bid: 1.0, ask: 1.1, epoch: (new Date()).getTime() },\r\n            { name: \"CADJPY\", group: \"\", decimals: 2, fractional: 0, bid: 1.0, ask: 1.1, epoch: (new Date()).getTime() }\r\n        ]\r\n\r\n    }\r\n\r\n\r\n    subscribe(s) {\r\n        var subscription = s;\r\n        // subscribe to server\r\n        var n = 300;\r\n        this.snapshotSymbols.forEach( sym => {\r\n            //subscription.onItemUpdate($.extend(sym, { command: \"ADD\" }));\r\n            //console.log({ ...sym, command: \"ADD\" });\r\n            subscription.onItemUpdate({ ...sym, symbolId:sym.name, command: \"ADD\" });\r\n\r\n            // set up the updating of the each second\r\n            setInterval(function () {\r\n\r\n                /*var mathRandom = */ Math.random();\r\n                if (Math.random() > 0.5) {\r\n                    sym.ask += 0.0132;\r\n                    sym.bid += 0.0131;\r\n                }\r\n                else {\r\n                    sym.ask -= 0.0161;\r\n                    sym.bid -= 0.0173;\r\n                }\r\n                //var obj = $.extend({}, sym, { command: \"UPDATE\" })\r\n                var obj = { ...sym, symbolId: sym.name, command: \"UPDATE\" };\r\n                obj.epoch = (new Date()).getTime();\r\n\r\n                subscription.onItemUpdate(obj);\r\n            }, sym.name === 'EURUSD' ? 1500 : n);\r\n            n += 50;\r\n        });\r\n        subscription.onEndOfSnapshot()\r\n    }\r\n};\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/livequotes/Pusher.js","\r\nexport class Subscription {\r\n\r\n    constructor(items = []) {\r\n        this.items = [];\r\n    }\r\n\r\n    onSubscription() { }\r\n    onEndOfSnapshot() { }\r\n    onItemUpdate() { }\r\n\r\n\r\n    init = function (itemList) {\r\n        this.items = itemList;\r\n    }\r\n\r\n    addListener(config) {\r\n        this.onSubscription = config.onSubscription;\r\n        this.onEndOfSnapshot = config.onEndOfSnapshot;\r\n        this.onItemUpdate = config.onItemUpdate;\r\n    }\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/livequotes/Subscription.js","import React, { Component } from \"react\";\r\n\r\nimport \"./LiveQuotes.css\";\r\n\r\n// import { Loading } from './theme-sources/bootstrap4/components/loading';\r\n\r\nimport { liveQuotesStore } from \"./LiveQuotesStore\"\r\n\r\n\r\nclass SearchBar extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleFilterTextChange = this.handleFilterTextChange.bind(this);\r\n        this.handleInStockChange = this.handleInStockChange.bind(this);\r\n    }\r\n\r\n    handleFilterTextChange(e) {\r\n        this.props.onFilterTextChange(e.target.value);\r\n    }\r\n\r\n    handleInStockChange(e) {\r\n        this.props.onInStockChange(e.target.checked);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <form>\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Search...\"\r\n                    value={this.props.filterText}\r\n                    onChange={this.handleFilterTextChange}\r\n                />\r\n                <p>\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        checked={this.props.mayorsOnly}\r\n                        onChange={this.handleInStockChange}\r\n                    />\r\n                    {' '}\r\n                    Only show mayors\r\n        </p>\r\n            </form>\r\n        );\r\n    }\r\n}\r\n\r\n/*\r\nclass CellInput extends React.PureComponent {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleTextChange = this.handleTextChange.bind(this, this.props.fieldName);\r\n    }\r\n\r\n    handleTextChange(fldName, e) {\r\n        this.props.onTextChange(fldName, e.target.value);\r\n    }\r\n\r\n    render() {\r\n        const symbol = this.props.symbol;\r\n        const value = symbol[this.props.fieldName];\r\n        if (this.props.inEdit) {\r\n            return (\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"...\"\r\n                    value={value}\r\n                    onChange={this.handleTextChange}\r\n                />)\r\n        }\r\n\r\n        return (\r\n            <span>{value}</span>\r\n        );\r\n    }\r\n}\r\n*/\r\n\r\nclass SymbolRow extends React.PureComponent {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.handleTextChange = this.handleTextChange.bind(this);\r\n        //this.handleEdit = this.handleEdit.bind(this);\r\n        //this.handleCancel = this.handleCancel.bind(this);\r\n        this.state = {\r\n            symbol: this.props.symbol,\r\n            symbolClone: null,\r\n            inEdit: false\r\n        }\r\n        this.timeoutId = null;\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        const { symbol } = this.state;\r\n        liveQuotesStore.subscribeToSymbol(symbol.symbolId, obj => {\r\n            clearTimeout(this.timeoutId)\r\n            this.setState({\r\n                symbol: { ...symbol, ...obj }\r\n            });\r\n        });\r\n    }\r\n\r\n    componentDidUpdate() {\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        // TODO unsubscribe\r\n    }\r\n\r\n    handleTextChange(fldName, value) {\r\n        const symbol = Object.assign({}, this.state.symbol);\r\n        symbol[fldName] = value;\r\n        this.setState({ symbol: symbol });\r\n    }\r\n\r\n    /*\r\n    handleEdit(e) {\r\n        if (!this.state.inEdit) {\r\n            //this.state.symbolClone = $.extend(true, {}, this.state.symbol);\r\n            this.state.symbolClone = Object.assign({}, this.state.symbol);\r\n        }\r\n        this.setState(prevState => ({\r\n            inEdit: !prevState.inEdit\r\n        }));\r\n    }\r\n\r\n    handleCancel(value) {\r\n        this.setState(prevState => ({\r\n            //symbol: { price : prevState.price },\r\n            //symbol : $.extend(true, {}, this.state.symbolClone),\r\n            symbol: Object.assign({}, this.state.symbolClone),\r\n            inEdit: !prevState.inEdit\r\n        }));\r\n    }\r\n    */\r\n\r\n    hideArrow() {\r\n        //console.log(`hideArrow ${this.state.symbol.name}`)\r\n        //console.log(this.state.symbol)\r\n        const date = new Date();\r\n        //console.log(sym)\r\n\r\n        this.setState({\r\n            symbol: { ...this.state.symbol, bidUp: null, askUp: null, epoch: date.getTime(), strEpoch: date.toLocaleTimeString() }\r\n        })\r\n        this.timeoutId = null;\r\n        //console.log(this.state.symbol)\r\n    }\r\n\r\n    render() {\r\n        const { symbol } = this.state;\r\n        const name = symbol.group !== \"mayor\" ?\r\n            symbol.name :\r\n            <span style={{ color: 'gold' }}>\r\n                {symbol.name}\r\n            </span>;\r\n        const bidParts = symbol.bidParts;\r\n        const bidUp = symbol.bidUp;\r\n        const askParts = symbol.askParts;\r\n        const askUp = symbol.askUp;\r\n\r\n        //if (this.timeoutId != null)\r\n        clearTimeout(this.timeoutId);\r\n        this.timeoutId = setTimeout(this.hideArrow.bind(this), 2000);\r\n\r\n        return (\r\n\r\n            <tr>\r\n                <td>{name}</td>\r\n                <td style={{ textAlign: 'right', 'paddingRight': '0' }}>\r\n                    <span>{bidParts.base}</span><span className='last2grid'>{bidParts.last2}</span><sup>{bidParts.fract}</sup>\r\n                </td>\r\n                <td style={{ textAlign: 'left', 'paddingLeft': '0', color: bidUp === 'bottom' ? 'green' : 'red' }}>\r\n                    {bidUp ? <i className={`oi oi-caret-${bidUp}`} /> : null}\r\n                </td>\r\n                <td style={{ textAlign: 'right', 'paddingRight': '0' }}>\r\n                    <span>{askParts.base}</span><span className='last2grid'>{askParts.last2}</span><sup>{askParts.fract}</sup>\r\n                </td>\r\n                <td style={{ textAlign: 'left', 'paddingLeft': '0', color: bidUp === 'bottom' ? 'green' : 'red' }}>\r\n                    {askUp ? <i className={`oi oi-caret-${askUp}`} /> : null}\r\n                </td>\r\n                <td>{symbol.strEpoch}</td>\r\n            </tr>\r\n\r\n        );\r\n    }\r\n}\r\n\r\n\r\n\r\nclass SymbolTable extends React.PureComponent {\r\n    render() {\r\n        const filterText = this.props.filterText;\r\n        const mayorsOnly = this.props.mayorsOnly;\r\n\r\n        const rows = [];\r\n        //let lastGroup = null;\r\n\r\n        this.props.symbolRows.forEach((symbol) => {\r\n            const filter = filterText.toUpperCase();\r\n            if (symbol.name.indexOf(filter) === -1) {\r\n                return;\r\n            }\r\n            if (mayorsOnly && symbol.group !== \"mayor\") {\r\n                return;\r\n            }\r\n            rows.push(\r\n                <SymbolRow\r\n                    symbol={symbol}\r\n                    key={symbol.name}\r\n                />\r\n            );\r\n            //lastGroup = symbol.group;\r\n        });\r\n\r\n        return (\r\n            <table className='table table-striped table-bordered table-hover table-sm table-dark my-table '>\r\n                <thead>\r\n                    <tr>\r\n                        <th>Symbol</th>\r\n                        <th style={{textAlign:\"right\"}}>Bid</th>\r\n                        <th></th>\r\n                        <th style={{textAlign:\"right\"}}>Ask</th>\r\n                        <th></th>\r\n                        <th>Time</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>{rows}</tbody>\r\n            </table>\r\n        );\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nclass LiveQuotes extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n        filterText: '',\r\n        mayorsOnly: false,\r\n        symbolRows: [],\r\n        loading: true\r\n    };\r\n\r\n    this.handleFilterTextChange = this.handleFilterTextChange.bind(this);\r\n    this.handleInStockChange = this.handleInStockChange.bind(this);\r\n    this.intervalId = null;\r\n  }\r\n\r\n  handleFilterTextChange(filterText) {\r\n      this.setState({\r\n          filterText: filterText\r\n      });\r\n  }\r\n\r\n  handleInStockChange(mayorsOnly) {\r\n      this.setState({\r\n          mayorsOnly: mayorsOnly\r\n      })\r\n  }\r\n\r\n  componentDidMount() {\r\n      this.loadData();\r\n  }\r\n\r\n  componentDidUpdate() {\r\n      //this.loadData();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n      clearInterval(this.intervalId);\r\n  }\r\n\r\n  //play() {\r\n  //}\r\n\r\n  loadData() {\r\n    liveQuotesStore.getSnapshot(null)\r\n          .then(symbolRows => {\r\n              this.setState({\r\n                  symbolRows: [...symbolRows],\r\n                  loading: false\r\n              });\r\n              //this.intervalId = setInterval(this.play.bind(this), 1000);\r\n          })\r\n          .catch(reason => console.log('Handle rejected liveQuotesStore.subscribe promise:' + reason))\r\n  }\r\n\r\n  render() {\r\n      return (\r\n          <div className=\"LiveQuotes\">\r\n              \r\n              <SearchBar\r\n                  filterText={this.state.filterText}\r\n                  mayorsOnly={this.state.mayorsOnly}\r\n                  onFilterTextChange={this.handleFilterTextChange}\r\n                  onInStockChange={this.handleInStockChange}\r\n              />\r\n\r\n              <SymbolTable\r\n                  symbolRows={this.state.symbolRows}\r\n                  filterText={this.state.filterText}\r\n                  mayorsOnly={this.state.mayorsOnly}\r\n              />\r\n\r\n          </div>\r\n      );\r\n  }\r\n\r\n\r\n}\r\n\r\nexport default LiveQuotes;\n\n\n// WEBPACK FOOTER //\n// ./src/livequotes/LiveQuotes.js"],"sourceRoot":""}