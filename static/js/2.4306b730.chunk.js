webpackJsonp([2],{179:function(t,e,n){var a=n(180);"string"===typeof a&&(a=[[t.i,a,""]]);var o={hmr:!1};o.transform=void 0;n(96)(a,o);a.locals&&(t.exports=a.locals)},180:function(t,e,n){e=t.exports=n(95)(!0),e.push([t.i,".my-table{position:relative!important;table-layout:fixed;white-space:nowrap;border-top-width:0!important;margin-bottom:0!important;font-size:14px}.my-table>thead>tr>th{padding:0;border-bottom-width:0;color:grey}.my-table>tbody>tr:first-child>td{border-top-width:0;border-width:0}.my-table>tbody>tr>td{border-width:0}.first{font-size:18px}.last2{line-height:30px;font-size:28px}.last2,.last2grid{color:#5d5d5d;font-weight:700;padding:0 2px}.last2grid{line-height:12px;font-size:12px}.adv-tpl sup{vertical-align:super;font-size:85%}.table-sm td,.table-sm th{padding:.2rem!important}","",{version:3,sources:["E:/react/sajt/src/livequotes/LiveQuotes.css"],names:[],mappings:"AACA,UACI,4BAA8B,AAC9B,mBAAoB,AACpB,mBAAoB,AACpB,6BAAiC,AACjC,0BAA8B,AAC9B,cAAgB,CACnB,AAED,sBACI,UAAa,AACb,sBAAyB,AACzB,UAAW,CACd,AAED,kCACI,mBAAsB,AACtB,cAAkB,CACrB,AAED,sBACI,cAAkB,CACrB,AAID,OACI,cAAgB,CACnB,AAED,OAGI,iBAAkB,AAClB,cAAgB,CAEnB,AAED,kBAPI,cAAe,AACf,gBAAkB,AAGlB,aAAe,CASlB,AAND,WAGI,iBAAkB,AAClB,cAAgB,CAEnB,AAED,aACI,qBAAsB,AACtB,aAAe,CAClB,AAED,0BAEI,uBAA2B,CAC9B",file:"LiveQuotes.css",sourcesContent:["\r\n.my-table {\r\n    position: relative !important;\r\n    table-layout: fixed;\r\n    white-space: nowrap;\r\n    border-top-width: 0px !important;\r\n    margin-bottom: 0px !important;\r\n    font-size: 14px;\r\n}\r\n\r\n.my-table > thead > tr > th {\r\n    padding: 0px;\r\n    border-bottom-width: 0px;\r\n    color:grey;\r\n}\r\n\r\n.my-table > tbody > tr:first-child > td {\r\n    border-top-width: 0px;\r\n    border-width: 0px;\r\n}\r\n\r\n.my-table > tbody > tr > td {\r\n    border-width: 0px;\r\n}\r\n\r\n\r\n\r\n.first {\r\n    font-size: 18px;\r\n}\r\n\r\n.last2 {\r\n    color: #5D5D5D;\r\n    font-weight: bold;\r\n    line-height: 30px;\r\n    font-size: 28px;\r\n    padding: 0 2px;\r\n}\r\n\r\n.last2grid {\r\n    color: #5D5D5D;\r\n    font-weight: bold;\r\n    line-height: 12px;\r\n    font-size: 12px;\r\n    padding: 0 2px;\r\n}\r\n\r\n.adv-tpl sup {\r\n    vertical-align: super;\r\n    font-size: 85%;\r\n}\r\n\r\n.table-sm th,\r\n.table-sm td {\r\n    padding: 0.2rem !important;\r\n}\r\n\r\n"],sourceRoot:""}])},181:function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t){this.symbolId=t.symbolId,this.name=t.name,this.group=t.group,this.digits=(t.decimals||4)+(t.fractional||1),this.fract2=t.fractional+2,this.bid=t.bid,this.ask=t.ask,this.UpdateInfo(t),this.consumers=[],this.symbolConsumers=[],this.chartSymbolConsumers=[]}n.d(e,"a",function(){return c});var r=n(182),i=n(183),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}();o.prototype.getParts=function(t,e){var n=e.toFixed(this.digits),a=n.length-this.fract2;return{base:n.substr(0,a),last2:n.substr(a,2),fract:0===t.fractional?"":n.charAt(n.length-1)}},o.prototype.UpdateInfo=function(t){this.bidUp=this.bid===t.bid?null:this.bid<t.bid?"bottom":"top",this.bid=t.bid,this.bidParts=this.getParts(t,t.bid),this.askUp=this.ask===t.ask?null:this.ask<t.ask?"bottom":"top",this.ask=t.ask,this.askParts=this.getParts(t,t.ask),this.epoch=t.epoch,this.strEpoch=new Date(this.epoch).toLocaleTimeString()},o.prototype.Update=function(t){this.UpdateInfo(t)};var l=function(){function t(){a(this,t),this.mayors=["EURUSD","GBPUSD","USDJPY","USDCHF","GBPCHF","NZDUSD","USDCAD","GBPJPY","EURNZD","EURJPY","EURCHF","AUDCAD","AUDJPY","CADJPY"],this.symbolNames=[],this.symbols=[],this.symbolDict={},this.pusher=new r.a,this.subscription=null,this.consumers=[]}return s(t,[{key:"getSnapshot",value:function(t){var e=this,n=this;return new Promise(function(a,o){null!=t&&e.consumers.push({onItemUpdate:t}),null==e.subscription?(e.subscription=new i.a(e.symbolNames),e.subscription.addListener({onItemUpdate:function(t){n.OnItemUpdate(t);var e=n.symbolDict[t.symbolId];n.consumers.forEach(function(t){return t.onItemUpdate(e)}),e.symbolConsumers.forEach(function(t){return t.onItemUpdate({bidParts:Object.assign({},e.bidParts),bidUp:e.bidUp,askParts:Object.assign({},e.askParts),askUp:e.askUp,epoch:e.epoch,strEpoch:e.strEpoch})}),e.chartSymbolConsumers.forEach(function(t){return t.onItemUpdate({epoch:e.epoch,bid:e.bid,ask:e.ask})})},onEndOfSnapshot:function(){console.log("first LiveQuotesStore.OnEndOfSnapshot()"+n.symbols.length),console.log(Object.entries(n.symbolDict)),a(n.symbols.map(function(t){return{symbolId:t.symbolId,name:t.name,group:t.group,bidParts:Object.assign({},t.bidParts),bidUp:t.bidUp,askParts:Object.assign({},t.askParts),askUp:t.askUp,epoch:t.epoch,strEpoch:t.strEpoch}}))}}),e.pusher.subscribe(e.subscription)):(console.log("non first LiveQuotesStore.OnEndOfSnapshot() called for other subscribers "+n.symbols.length),a(n.symbols))})}},{key:"subscribeToSymbol",value:function(t,e){var n=this.symbolDict[t];void 0===n?console.log("this.symbolDict["+t+"] not found. "):n.symbolConsumers.push({onItemUpdate:e})}},{key:"subscribeToChartSymbol",value:function(t,e){var n=this.symbolDict[t];void 0===n?console.log("this.symbolDict["+t+"] not found. "):n.chartSymbolConsumers.push({onItemUpdate:e})}},{key:"OnAdd",value:function(t){var e=new o(t);this.symbols.push(e),this.symbolDict[e.symbolId]=e}},{key:"getSymbol",value:function(t){var e=this.symbols.find(function(e){return e.symbolId===t});return e||alert("Not found symbol("+t+") in:"+this.symbols.map(function(t){return t.symbolId})),e}},{key:"OnItemUpdate",value:function(t){var e=t.command;if("UPDATE"===e){var n=this.symbolDict[t.symbolId];n||(n=this.symbolDict[t.symbolId]=this.getSymbol(t.symbolId)),n.Update(t)}else"ADD"===e&&this.OnAdd(t)}},{key:"Mayors",get:function(){return this.mayors}},{key:"Symbols",get:function(){return this.symbols}}]),t}(),c=new l},182:function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return r});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),r=function(){function t(e,n){a(this,t),this.height=e,this.width=n,this.snapshotSymbols=[{name:"EURUSD",group:"mayor",decimals:4,fractional:1,bid:1.17829,ask:1.156,epoch:(new Date).getTime()},{name:"GBPUSD",group:"",decimals:4,fractional:1,bid:1,ask:1.1,epoch:(new Date).getTime()},{name:"USDJPY",group:"mayor",decimals:2,fractional:0,bid:1,ask:1.1,epoch:(new Date).getTime()},{name:"USDCHF",group:"mayor",decimals:4,fractional:1,bid:1,ask:1.1,epoch:(new Date).getTime()},{name:"GBPCHF",group:"",decimals:4,fractional:1,bid:1,ask:1.1,epoch:(new Date).getTime()},{name:"NZDUSD",group:"",decimals:4,fractional:1,bid:1,ask:1.1,epoch:(new Date).getTime()},{name:"USDCAD",group:"",decimals:4,fractional:1,bid:1,ask:1.1,epoch:(new Date).getTime()},{name:"GBPJPY",group:"",decimals:2,fractional:0,bid:1,ask:1.1,epoch:(new Date).getTime()},{name:"EURNZD",group:"",decimals:4,fractional:1,bid:1,ask:1.1,epoch:(new Date).getTime()},{name:"EURJPY",group:"mayor",decimals:2,fractional:0,bid:1,ask:1.1,epoch:(new Date).getTime()},{name:"EURCHF",group:"mayor",decimals:4,fractional:1,bid:1,ask:1.1,epoch:(new Date).getTime()},{name:"AUDCAD",group:"",decimals:4,fractional:1,bid:1,ask:1.1,epoch:(new Date).getTime()},{name:"AUDJPY",group:"",decimals:2,fractional:0,bid:1,ask:1.1,epoch:(new Date).getTime()},{name:"CADJPY",group:"",decimals:2,fractional:0,bid:1,ask:1.1,epoch:(new Date).getTime()}]}return o(t,[{key:"subscribe",value:function(t){var e=t,n=300;this.snapshotSymbols.forEach(function(t){e.onItemUpdate(Object.assign({},t,{symbolId:t.name,command:"ADD"})),setInterval(function(){Math.random(),Math.random()>.5?(t.ask+=.0132,t.bid+=.0131):(t.ask-=.0161,t.bid-=.0173);var n=Object.assign({},t,{symbolId:t.name,command:"UPDATE"});n.epoch=(new Date).getTime(),e.onItemUpdate(n)},"EURUSD"===t.name?1500:n),n+=50}),e.onEndOfSnapshot()}}]),t}()},183:function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return r});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),r=function(){function t(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];a(this,t),this.init=function(t){this.items=t},this.items=[]}return o(t,[{key:"onSubscription",value:function(){}},{key:"onEndOfSnapshot",value:function(){}},{key:"onItemUpdate",value:function(){}},{key:"addListener",value:function(t){this.onSubscription=t.onSubscription,this.onEndOfSnapshot=t.onEndOfSnapshot,this.onItemUpdate=t.onItemUpdate}}]),t}()},99:function(t,e,n){"use strict";function a(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),l=n.n(s),c=n(179),u=(n.n(c),n(181)),h=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),m=function(t){function e(t){o(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.handleFilterTextChange=n.handleFilterTextChange.bind(n),n.handleInStockChange=n.handleInStockChange.bind(n),n}return i(e,t),h(e,[{key:"handleFilterTextChange",value:function(t){this.props.onFilterTextChange(t.target.value)}},{key:"handleInStockChange",value:function(t){this.props.onInStockChange(t.target.checked)}},{key:"render",value:function(){return l.a.createElement("form",null,l.a.createElement("input",{type:"text",placeholder:"Search...",value:this.props.filterText,onChange:this.handleFilterTextChange}),l.a.createElement("p",null,l.a.createElement("input",{type:"checkbox",checked:this.props.mayorsOnly,onChange:this.handleInStockChange})," ","Only show mayors"))}}]),e}(l.a.Component),d=function(t){function e(t){o(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.handleTextChange=n.handleTextChange.bind(n),n.state={symbol:n.props.symbol,symbolClone:null,inEdit:!1},n.timeoutId=null,n}return i(e,t),h(e,[{key:"componentDidMount",value:function(){var t=this,e=this.state.symbol;u.a.subscribeToSymbol(e.symbolId,function(n){clearTimeout(t.timeoutId),t.setState({symbol:Object.assign({},e,n)})})}},{key:"componentDidUpdate",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"handleTextChange",value:function(t,e){var n=Object.assign({},this.state.symbol);n[t]=e,this.setState({symbol:n})}},{key:"hideArrow",value:function(){var t=new Date;this.setState({symbol:Object.assign({},this.state.symbol,{bidUp:null,askUp:null,epoch:t.getTime(),strEpoch:t.toLocaleTimeString()})}),this.timeoutId=null}},{key:"render",value:function(){var t=this.state.symbol,e="mayor"!==t.group?t.name:l.a.createElement("span",{style:{color:"gold"}},t.name),n=t.bidParts,a=t.bidUp,o=t.askParts,r=t.askUp;return clearTimeout(this.timeoutId),this.timeoutId=setTimeout(this.hideArrow.bind(this),2e3),l.a.createElement("tr",null,l.a.createElement("td",null,e),l.a.createElement("td",{style:{textAlign:"right",paddingRight:"0"}},l.a.createElement("span",null,n.base),l.a.createElement("span",{className:"last2grid"},n.last2),l.a.createElement("sup",null,n.fract)),l.a.createElement("td",{style:{textAlign:"left",paddingLeft:"0",color:"bottom"===a?"green":"red"}},a?l.a.createElement("i",{className:"oi oi-caret-"+a}):null),l.a.createElement("td",{style:{textAlign:"right",paddingRight:"0"}},l.a.createElement("span",null,o.base),l.a.createElement("span",{className:"last2grid"},o.last2),l.a.createElement("sup",null,o.fract)),l.a.createElement("td",{style:{textAlign:"left",paddingLeft:"0",color:"bottom"===a?"green":"red"}},r?l.a.createElement("i",{className:"oi oi-caret-"+r}):null),l.a.createElement("td",null,t.strEpoch))}}]),e}(l.a.PureComponent),p=function(t){function e(){return o(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),h(e,[{key:"render",value:function(){var t=this.props.filterText,e=this.props.mayorsOnly,n=[];return this.props.symbolRows.forEach(function(a){var o=t.toUpperCase();-1!==a.name.indexOf(o)&&(e&&"mayor"!==a.group||n.push(l.a.createElement(d,{symbol:a,key:a.name})))}),l.a.createElement("table",{className:"table table-striped table-bordered table-hover table-sm table-dark my-table "},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Symbol"),l.a.createElement("th",{style:{textAlign:"right"}},"Bid"),l.a.createElement("th",null),l.a.createElement("th",{style:{textAlign:"right"}},"Ask"),l.a.createElement("th",null),l.a.createElement("th",null,"Time"))),l.a.createElement("tbody",null,n))}}]),e}(l.a.PureComponent),b=function(t){function e(t){o(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={filterText:"",mayorsOnly:!1,symbolRows:[],loading:!0},n.handleFilterTextChange=n.handleFilterTextChange.bind(n),n.handleInStockChange=n.handleInStockChange.bind(n),n.intervalId=null,n}return i(e,t),h(e,[{key:"handleFilterTextChange",value:function(t){this.setState({filterText:t})}},{key:"handleInStockChange",value:function(t){this.setState({mayorsOnly:t})}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentDidUpdate",value:function(){}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"loadData",value:function(){var t=this;u.a.getSnapshot(null).then(function(e){t.setState({symbolRows:[].concat(a(e)),loading:!1})}).catch(function(t){return console.log("Handle rejected liveQuotesStore.subscribe promise:"+t)})}},{key:"render",value:function(){return l.a.createElement("div",{className:"LiveQuotes"},l.a.createElement(m,{filterText:this.state.filterText,mayorsOnly:this.state.mayorsOnly,onFilterTextChange:this.handleFilterTextChange,onInStockChange:this.handleInStockChange}),l.a.createElement(p,{symbolRows:this.state.symbolRows,filterText:this.state.filterText,mayorsOnly:this.state.mayorsOnly}))}}]),e}(s.Component);e.default=b}});
//# sourceMappingURL=2.4306b730.chunk.js.map